const fs = require("fs");

const { errorLog } = require("./format-log");

module.exports = (folderName, idParam) => {
  if (!folderName || !idParam) return undefined;

  const finalValues = {};
  const files = fs.readdirSync(folderName);
  if (!files) {
    warningLog("When trying to get files to convert into objects nothing was found");
    return undefined;
  }

  files.forEach((file) => {
    try {
      const obj = require(`${folderName}/${file.split(".")[0]}`);
      if (finalValues[obj[idParam]]) {
        errorLog("There's a duplicate button prefix");
        return undefined;
      }

      finalValues[obj[idParam]] = { ...obj };
    } catch (e) {
      errorLog("There has been an error trying to get the object of the files", e);
    }
  });

  return finalValues;
};
